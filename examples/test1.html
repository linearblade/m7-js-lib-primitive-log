<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
    <title>m7 Primitive Log – Debug & Test Page</title>
    <link rel="stylesheet" href="style.css">
    <script src="https://js.m7.org/gs/v1/bootStrap.js"></script>
    <script type="module" src="../src/auto.js"></script>
    <script src="./test1.js"></script>
  </head>
  <body>
    <h1>m7 Primitive Log Test Page</h1>
    <div id="status-line">Status: <span id="current-status">not initialized</span></div>

    <div id="controls" style="display:flex; flex-direction:column">
      <div style="display:flex; flex-direction:row">
	<!-- Bucket creation & global controls -->
	<button class="info" onclick="createTestBuckets()">Create Test Buckets</button>
	<button class="secondary" onclick="listBuckets()">List Buckets / Stats</button>
	<button class="danger" onclick="clearAll()">Clear All Buckets</button>
	<button onclick="clearOutput()">Clear Output Pane</button>
      </div>
      <!-- Per-bucket logging buttons -->
      <div style="margin: 20px 0 10px; font-weight: bold; color: #88f;">Log to specific buckets:</div>
      <div style="display:flex; flex-direction:row">

	<button class="info" onclick="logToBucket('app', 'log', 'Normal app event')">app . log()</button>
	<button class="info" onclick="logToBucket('app', 'info', 'User action info')">app . info()</button>
	<button class="warning" onclick="logToBucket('app', 'warn', 'High latency warning')">app . warn()</button>
	<button class="danger" onclick="logToBucket('app', 'error', new Error('App crash simulation'))">app . error()</button>

	<button class="danger" onclick="logToBucket('errors', 'error', 'Critical backend failure')">errors . error()</button>
	<button class="warning" onclick="logToBucket('errors', 'warn', 'Slow query')">errors . warn()</button>

	<button class="debug" onclick="logToBucket('debug', 'log', { debugData: { ts: Date.now(), rand: Math.random() } })">debug . log() (complex obj)</button>
      </div>
      <!-- Volume & policy controls -->
      <div style="margin: 20px 0 10px; font-weight: bold; color: #88f;">Volume & Console Policy:</div>
      <div style="display:flex; flex-direction:row">
	<button class="warning" onclick="logHighVolume('app', 80)">High Volume → app (80 logs)</button>
	<button onclick="setGlobalConsolePolicy('all')">Console: ALL</button>
	<button onclick="setGlobalConsolePolicy('warn')">Console: WARN+</button>
	<button onclick="setGlobalConsolePolicy('error')">Console: ERROR only</button>
	<button onclick="setGlobalConsolePolicy('off')">Console: OFF</button>
      </div>
    </div>

    <div id="output">Output will appear here...\n</div>
  </body>
</html>
